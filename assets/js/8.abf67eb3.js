(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{246:function(t,s,a){t.exports=a.p+"assets/img/serviceWorker.ac528e31.png"},247:function(t,s,a){t.exports=a.p+"assets/img/cache-worker.9dd34199.png"},248:function(t,s){t.exports="data:image/png;base64,UklGRrITAABXRUJQVlA4IKYTAADwhwCdASoABYcAPpFIn0wlpCKio3LImLASCWlu4Wdx2Pk6MlK/z7/oO13/P+FfiH9cSZrivsgisZL/GT/S9Qj2zuxexeYL7JfbfII+E/4XoP9dvYA8b/8P+wHl6faP9Z7Af87/t//q/w3u0f5nkG+tfYI6R3pACS6d3Omd6mTEdnxLs6WkLGAnAvxC840Jto05n/dFIdFCcC/8ou9BpZyFbvYpIETRcDG3Oz9nNuqmC3QnHHSwPaDuC6u+n2qdjFNrfPrYvzUCHRQWhx0FKbug99QKEgXs84tUuMFTD9t6S6DdwHLjp9X4wovFXcMbMhnfJ+KOJc0ja9EHorA2u3B7c9ff1vKYoJ9o6jR97apNs9Ffl9mla5HIdKhjQdgjPVQqBxL3nvbaVI9x3q3KA87kGW9KhefIzfXudHP5PIGzjTpFnmmM8P/IuvELANVX7T6QGQulhtgBrVQBsoRLIOpuG0IjuxkWQEwRUICcWsm1fqqTPlKiB0wgtWP65pP1zSfrmk/XNJ+uaTwOa+JAC8Ri65zXxIAeRdXkPpsiwTBWPgc18SAHkXV5D5rAHzWAPmsAdV+3V3AYvoAs0CAmCsfA5r4kZo3K7gQEwVj4HNfEgB5F1eQ+awB80H8s55WjFVX3doI2+v8nhRueyb3hG3Rmtv5+9f9jJUWHYcPd5k0THpmdEqIgYzZ6WYUms6PVeWVELVXZhfiA8aazmcf2gQOqVASmRhe0EfpYF8lOMJdusxl9LAvlHj31MdsCPUcY/GYhJvZ/3hW0Qg8zgQEeQ7lY95DpgjyHd3We6WXhuld4bVRHhZ0fVCHcn0VB33cDT6Omgjk/nByHcD59x6Ij/vzrsdE4orIL3f4ICPIdyfFdw43oLlfTw6PPIdwRCvVkOydDktsXkPr0Gv41uMzRZmu77yEykP2dfCgs/Gj8VLKKhd/KoFV6Ws+LWfnLwTl4Jy8E5eCcvBOWp6rb4utr+zmm67UchMu/hpaz4nVBX+THBYdJvtjGrypEBxmneytEbX+ePxsc1TkqPSfhb2nUpqdZIE+reCBUHKae1kMxEWoiLURFqIgyU6QAuFqVb5p5Z1wG986o1+G6XBPid+0+JTz/g7vZ50X8XjmlRkt0TdLcjO7+M7nBR4GN+LH1klM7M0OExM+4dcpSEZz6VnOxvxWohdSqTgdJySo9LWfFrPzl4Jy8E5eCbEfatRnNuYCLfef4WLWfnLv11WaHrHM+dX0MOmrE5JUdtWRfJFJxSSrtPLATHmQQyZCCseDbV+WfnLwTl4Jy8ANsVto31GizYUZwxp3C06Qde7jwrBH1GkgbsLHRMMS+UnR+l9Fv0xXBWvtWSVHbhMwL5XQPwa9ZE909yd5DpgjyHcrHvIdMpQYoiFoOzvITVaEK7G4vOmCLrSSvAByt6rarTIrilNJ3kPl0pdnIFg30JDC/SqSVTFGfxLUdL0KbyEQAAP79XAd3Djm0WiyYH04WjQbhJpTea9vI830kZdaCAnHhdneG1yjYeEfLvwei59se+n+s1ljEc866k0On3K/YGnad60gQ6immPYL1Am918eLoul/WIyFEVL4UXgtkO+8W8PPhz0DRhfDGXYOBNNd5KDiJ68nQaDMvxvYAdhCwz0wim1sz/aiLCg4Iz24gxJawgRg3tE3o8EvRVQ2EfEgwHJeFezIVewT4R5YgLvicSR2D6pam88eKIyQ8eGNTqEyQhOTg40f0b6EkxVm8ARg2LiTRkMzp7GJOcCZ+5RQvsH0dm+/FQJbpqOlLKMajdG+kWo+BGi2nEm8utNKc4pyBw1T7UWpeK0+54VTfAjv+HxIlm4iWgqM76qAZ/f3FIpX8BpgtbP045UuZGluaxzjytj0jNirZTJ1RHReZDkbW0qNWlqg4RRaZX0yLLzVmsQYmNSrKypZ2NHuP5Oxd7ZkZY36qiX3uSu3pqxbs1VqCXtPTT3GrMjg4OCLd4U0lQxNFHclQd41QGlt5O21oIFWawL4NRgkVcmusaMLmB6kEcW4VRJrtN6vrFRsauWFQCPGRKP3LgG+OFNjfd8MKS/xKEgPv69EgLzy0i972wjThpREsyY0d0WtI1STM3AHAqqgsuVpTKnh0KzBejetEZS2oBK/Vai8lT6VWVUFdipG2AwvZZitjzE+HCJeRds5QFLgOO6itB+/kvdwmRD5DOE61lLpVIoS6oM/OfVXSCCRU1UoTVPi1TkI+zIZoxMUz9eCyNrhzC/6nSGAl2YKirx/6AmJQ5byd6GyYJWyN59mzNuvvRPBBapwf5e2qdrqDO9rIOCO993njkZFO9Q//P/UApwSaaRPnbsFbCbMrXfVVm717PBsfs8xzSz7pwbEwTxHDx/9FKe/ZdYoQ0uvHqFuNhWYirEJMFH3fWcRQNwfftSEuRuhrnMOjv+oewSR7RGQQs2nvjzPurKHxyKYRs/Tz2DAFSKwOezjkKI2Wphw35XpuQhAFRkQ+va6/W5zKmMPL7MWDFhXZu50DkyZyTPS8CPqQXEAL/KqJn5FWuShxNXuS+gNv3qVQCR4/k7F3uOzMvNtt93bA2G1nb/8mA9UCaUtuZbZk+/a7zgsMeP0+azjFXPXJsSztJ5OchnpGAlyj0g6ToWGrXRw3mIhFWOCwhvokVUbsvvB58Z/lso+VunZf41m2D66JwPtrhd0ffD8mrNpbTFhVq+dySfa2LTDwYA+Egz85/LaHTSqUUsLU8rQ7Fr80xzKUmERAZrt/jb7Ab5BuOQEWaW4EKfPf8gTuMleoGXEW7NFwBEaPMFDBA28rfG+EOko0qxaWlyH2PJzXCTqiUnPZhaJd0qMW8dg6XdxJMzIavOcbPJ74nLdbl6j4k6/+/wPAcXFy7i6QpFEJ9apoT6ZoF6enaipnuajqct0JoCnATLcUvp7IEnp3iVN8o95nE0Cvp3mHSJ4JomaxBb2mJFG+AavOhbPTpULKXd24smEKW4+RDeT7Z+nnsGlMGx6f8mcKi6UEeTKw85dzRhWZdGA+FweStsz6djELeofyOfpJ5e9xdRMUYm5AiJpESt2vv0el0glVMPjS04VP0WcZDdfo1Zkxwf0ZN+Gvfdc69ZB4NY4bPHMSYoTz+dQ07qiALofL3GwKPcIdOOLSyZkFGSzyXd2TjFQO2QzTtSRpmzD89BNnMCad5ss442aQ0ko+IAouIDBeudvEQVMnVcWeeIUd1LotdxJJSkIA7SVTcZufXJHh/AiB2EZ7j9nWg/Qw71MsGU/y9YG+zPWQlVJcuCceRmKhjxRTBRzPJa+UR5MqcoSI/tBhf6UEAAAWxwAAU31lUBHaqJhUZdRr7XJiy5S2qkqBPhVzhUL40mJgDj+EOq7HEUxDNCz2Tyze8am8KionUwrjGrvP0WV3qiuqDucCXd7fw8f8NAQU4DOzL8A22KaqZGb102ViX38iMtp6yxIeBgku5F2hUOHui0P2RR/EFaiSwmTBiQ7AkFWc/OllffaeFB6EfEWrKV+w5FpdxH0j3GtihUsFMMoxQoRSx5x9fDyeFDALFzAFJKBH+xPyJsTVFAtOjia03Mch/F+ABRNEvs3tVki/Ao5X3MPr88eXFfNN0aRYXmpBGSz7gAZ191Yn91ZDR/FS4gDxG9LGr4F8/haBt2qAKBoq06aL3IASVTQ7UWi9JbJa880+IoepFn1xVUSyDkxNXeFkTIdOxOBJdmk/lCbHRvMh12M9iUsOIHoHE0CjHSSaMlopkTAgBnp4PpR9ks/1328nE8B0yHQ2Q3LyDKOlKKTz1ULBOcWX27um9rVKSwX0OPEeobcb4q+Y5bMq/qf1dGZg9HsAXCKQRE3JZzf86OcVdMy5AbDgIdW7Z8b/l3leeq/KZr4VvsTXKAWWQlUMvO3noFoh+vu9anW8Z0OYpdapkt3EIgOJ8UCmkBuTTa6vNRDMDgAPakPi4wn/Or3mrWeQx6a50pRod16NFOPeF3GcCtuadW0Q1j+ZMXmrSReX0b8kjlfkWdZLR8eOY6LWiNLU3rDN9f6tEhU0IY6Z9xFJ5c5HtHshoVy7zygICPRq5jOKpH3dS4qZHWIXAI7wBooymAEmdynkiE9Te47WvXKBT1VGkBTPxCbgCCDG5iOJ0h5yzXEVUqXWfdceZZx4Rcqby5i6+FN2hZSfJXMi9cb9Cik1a8QfxwUVRJsyKtncJ2DheFbw8zwylXdcNqMWJAjItg+9jTRPGlbWXvq26rCs3A3TsnJa2qm4ek0EcZ95VcE9p2vw5vQbF1Qv1m8uZyIHGSG3Uboceb88wh8INOCyWbfW3dVtLyySM5OEL5VJV2S+qWP2Ef/6CBR3LCN4sX3YJY9eSqnPJ0UrcfolcDXFgPrYgGaOzAWw6FDh6JURcrHrAd0RSdlaira0zoac/Vm1lWk4deuu3GWcIe2zASbLttzvqWC+Gnm08kK7LKba2xxBt+VJDyoKgdx2ATQ1o4V5CPPliMGPCejm+QuEIhKDdlBZy+pZji4e2Ef67eCDjXkXHS8uS44wvzXcNjdMpEW5LrpfKnQccCX51t6q2V8H71KL74Jw8snnZN6zk00bzdbCysEtdde0M32mZJ8lca0u7BEeklTqw39G6MTnWN++oDceY02a9kBCKeiajTT0hCSkqLEdum0uplk3XIPqY8JR+tZBej9ieT6JbbLmOYA4K0aTg4L9lcUiNGewZzEtad0iKNYj57dC+g+hPbE6nf4f77mUJc0hxjk3/INgY2UWcaX37m9ML6v3UM2Ke5lnKfY2M1tUypH5Wiy1veCTceeX0mGLMhk/8iIeXH0yG3BBGkfaBRohM8K12L6qxsdXS0GLwyurkk01lCy9wMpc+P/lVs0uU5kXpomUJ0KX21dCuzHl1yWFR4qkK557lxtD/EiHuBm8GnjidZqXC1Bawvi78UclnDP65WTeu0Qvow4Gt0Xhc4/hAhHy3XRO7VNFyYaMV7YsH1mVBuoJjqrWu4c9PShkkww048AuS3h2VEdUsMNVANkskKpKET50GkSRMTdXw+Or0R4QWpiXLYOGN08T6MobnrQjLCx0jJFclZ2OpLrAGK7L3GchCipLRWmSEz7EqAHgJCKCFKYrJfOk+psHMQRVUFZ1YtrCieY5WPPv/1yDI+xvOeW1XdCayuuFqdQJLjVGW2uCVW1NKbukhmmIZPF319TTw0H6uzqxDfuCNd/FPl8M40ZvmUN5cEKmwN6PLzfj6FZ29MG/zJODVFg0xc6xRNf7/Y547555LgdztDfgdxBQz7ulTVky4ZEKPaW8TFq3a98MaQpplOz67NkHtXXqDyXHgpQuCj98XZYaKsi8UzsH6nPwuBItiEQeRWYKIXCe1acW8Tl2/E02P+NyteBZl17vl84Is4UkAodLw5yRylNN10UFkQHPNRuQLmsrkd8dzummNl92TX0iFLDUWf5PmOUYxdtQ5EcHk2RiboDwYC95Kbrg3nT33WLH7rvDWXJPhFyc7dhnPqDl4VPiU9bE7UinKPQwJ0Bi7bM8+KdG7BZ4S0yXst1/fsgvViQQKY9Yw9hLp4ED+utW8uekWyKhEnzbb0JN3nVoj43cFFkPyjccBtw8j1aQ+sdH0h792tD60GtMwJD4R+edk2WAhfErpSn01NWHuY9N7cAbZFmvskJ7KE9SNHqZ51XZhYFOHqojAJwc9a1zsR/7f8zY10Gk67IOISdyFuSsqv5lWvuuQqZJiaGX/cjn2ydVHVKLv0iyRL5bnnWA5/sm2A5ONxFxg94ay7BFeL60fcRr3s/UeBtUfwDYb2fHOWCJHuf/12zczNRf6Kp9jOKbv7KRdWx7SlUk2vJYsKGXRUAJJICstjYGNgRqchR1mEpGzmmVpty2CsJboDF22Z58U6N2Czws78gsGECxYzo6JNQowQdV+u5HHC34sgjSbm2gtcS9vWnm23hYRMz5vmIRcWcn+QK/8RX9TrOi3ohA3V/P3hY3FZXtK9VOx6OTspavs4FHwaTJhNgnZoLqUE6XBzsMGv83coPkR6HAYdEuFQ4WTDqJSP1gikfD85j88OpUD4bw25rHFD0/+k1xKmN+Ko3CX8h2NvKAFwNAxNIP4K/cCAn5ZEGyxqA1ET0jVj5j4AM8MWi9p2wG4sgs2isRzVQ02Ezafcbcu5xG/d5Pa/REF/NRzH/uZT/DpeKtn4Qq1HBd+91pICh0QIz1UyMpqhcpdUHIB8ruXlNWLH7/ScgbVZ2IDwZFUPe3mrtjcDxz6fNYaqwZxFKU7rXovhdzoO4B4ffaOvQyIndyzXgmZeK7fik8yKd7HCpWR2HykzWNkAL3DmQIlqNfO7Got38TX4/y92816240Y/h3fipT9Gsd04kR7N3lVfto6tw7jfNVAbZz1wmMJ7/fBa6f20KIhdzUGDYYlpEAdLSaHalIzc9ejqm3/P9vqYlCYJj9BkncqGCLo55ZbgAJUvqKIIUEHtWd9SjXxgyMIt/IYxWsyp+padeSZgzKgpbe9rCK1cnU+gqPDXEOJ/1Rc0b54ymQxq48BmSdleOQXgwDVe4le5eslQTXNfpRFxfETzuymifTHEW/QOzVfe3iTC31wblABVtS67QaFMILQreBsQOgt2iMZYZUH9eUFFG0PbzO/hmcufVF8kdsXJe6q5mNJAJN3xV3lGpBHUK5FGOElOWd96G5VxJMtpmP20+lAOD27DiAa8B2zEmhLNFPnHYoVenDYWTdxBbyTJgkQ4JEoAAAAA=="},350:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"service-worker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#service-worker"}},[t._v("#")]),t._v(" Service Worker")]),t._v(" "),n("p",[t._v("Service Worker 是运行在浏览器背后的独立线程，一般可以用来实现缓存功能。使用 Service Worker的话，传输协议必须为 HTTPS。因为 Service Worker 中涉及到请求拦截，所以必须使用 HTTPS 协议来保障安全。")]),t._v(" "),n("p",[t._v("Service Worker 实现缓存功能一般分为三个步骤：首先需要先注册 Service Worker，然后监听到 install 事件以后就可以缓存需要的文件，那么在下次用户访问的时候就可以通过拦截请求的方式查询是否存在缓存，存在缓存的话就可以直接读取缓存文件，否则就去请求数据。以下是这个步骤的实现：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("navigator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serviceWorker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  navigator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serviceWorker\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sw.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("registration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'service worker 注册成功'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'servcie worker 注册失败'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// sw.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听 `install` 事件，回调中缓存所需文件")]),t._v("\nself"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'install'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitUntil")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    caches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-cache'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cache")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./index.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./index.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拦截所有请求事件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果缓存中已经有请求的数据就直接用缓存，否则去请求数据")]),t._v("\nself"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fetch'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("respondWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    caches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fetch source'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("打开页面，可以在开发者工具中的 Application 看到 Service Worker 已经启动了\n"),n("img",{attrs:{src:a(246),alt:""}})]),t._v(" "),n("p",[t._v("在 Cache 中也可以发现我们所需的文件已被缓存\n"),n("img",{attrs:{src:a(247),alt:""}})]),t._v(" "),n("p",[t._v("当我们重新刷新页面可以发现我们缓存的数据是从 Service Worker 中读取的\n"),n("img",{attrs:{src:a(248),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"好文链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#好文链接"}},[t._v("#")]),t._v(" 好文链接")]),t._v(" "),n("ul",[n("li",[t._v("https://www.zcfy.cc/article/service-worker-what-are-you-mariko-kosaka-1927.html")]),t._v(" "),n("li",[t._v("https://juejin.im/post/5ba0fe356fb9a05d2c43a25c")]),t._v(" "),n("li",[t._v("https://juejin.im/post/5bf3f656e51d45338e084044")]),t._v(" "),n("li",[t._v("https://juejin.im/post/5bf3f6b2e51d45360069e527")])])])}),[],!1,null,null,null);s.default=e.exports}}]);